<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <link rel="apple-touch-icon" sizes="76x76" th:href="@{/dashboardStatic/img/apple-icon.png}">
    <link rel="icon" type="image/png" th:href="@{/dashboardStatic/img/favicon.png}">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
    <title>Register house</title>
    <meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no'
          name='viewport'/>
    <!--  dashboard template  -->
    <!--     Fonts and icons     -->
    <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700,200" rel="stylesheet"/>
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css" rel="stylesheet">
    <!-- CSS Files -->
    <!-- CHI SUA CAC DUONG DAN CSS O DUOI DAY -->
    <link th:href="@{/dashboardStatic/css/bootstrap.min.css}" rel="stylesheet"/>
    <link th:href="@{/dashboardStatic/css/paper-dashboard.css?v=2.0.1}" rel="stylesheet"/>
    <!-- CSS Just for demo purpose, don't include it in your project -->
    <link th:href="@{/dashboardStatic/demo/demo.css}" rel="stylesheet"/>

    <!--  them richtext  -->
    <!-- CSS của Summernote -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/summernote/0.8.18/summernote-lite.min.css" rel="stylesheet">
    <!-- jQuery (yêu cầu của Summernote) -->
    <!--    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>-->
    <script th:src="@{/dashboardStatic/js/core/jquery.min.js}"></script>
    <!-- JavaScript của Summernote -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/summernote/0.8.18/summernote-lite.min.js"></script>
</head>
<body>
<div class="wrapper ">
    <!--  Side navbar: chua lien ket den cac trang tuy chon cua minh  -->
    <div class="sidebar" data-color="white" data-active-color="danger">
        <div class="logo">
            <!--     Đường dẫn đến web chính của dự án     -->
            <a th:href="@{https://www.creative-tim.com}" class="simple-text logo-mini">
                <!--     Avatar người dùng ở đây     -->
                <div class="logo-image-small">
                    <img th:src="@{/dashboardStatic/img/logo-small.png}">
                </div>
                <!-- <p>CT</p> -->
            </a>
            <!--     Đường dẫn đến web chính của dự án     -->
            <a th:href="@{https://www.creative-tim.com}" class="simple-text logo-normal">
                Bui Minh Chien
                <!--     Thêm logo dự án ở đây     -->
                <!--           <div class="logo-image-big">-->
                <!--            <img src="../assets/img/logo-big.png">-->
                <!--          </div>-->
            </a>
        </div>
        <div class="sidebar-wrapper">
            <ul class="nav">
                <li>
                    <a th:href="@{/house-listing/profile}">
                        <i class="nc-icon nc-single-02"></i>
                        <p>Profile</p>
                    </a>
                </li>
                <li>
                    <a th:href="@{/house-listing/home}">
                        <i class="nc-icon nc-bank"></i>
                        <p>HomePage</p>
                    </a>
                </li>
                <li >
                    <a th:href="@{/house-listing/ownerlist}">
                        <i class="nc-icon nc-single-copy-04"></i>
                        <p>House Owner</p>
                    </a>
                </li>
                <li class="active">
                    <a th:href="@{/house-listing/register-form}">
                        <i class="nc-icon nc-bullet-list-67"></i>
                        <p>Upload House Renting</p>
                    </a>
                </li>
                <li>
                    <a th:href="@{/logout}">
                        <i class="nc-icon nc-user-run"></i>
                        <p>Logout</p>
                    </a>
                </li>
            </ul>
        </div>
    </div>
    <!--  End side navbar  -->
    <div class="main-panel"> <!--  Day la phan ben phai cua trang  -->
        <!-- Top Navbar, SUA TIEU DE TRANG CHO PHU HOP -->
        <nav class="navbar navbar-expand-lg navbar-absolute fixed-top navbar-transparent">
            <div class="container-fluid">
                <span class="navbar-brand">VietHouse</span>
            </div>
        </nav>
        <!-- End Top Navbar -->
        <!-- Noi dung cua trang se nam trong phan content nay -->
        <div class="content">
            <div class="row">
                <div class="col-md-12">
                    <div class="card card-user">
                        <div class="card-header">
                            <h5 class="card-title">Please enter the asset information</h5>
                        </div>
                        <div class="card-body">
                            <form th:action="@{/house-listing/register}" th:method="post" th:object="${houseRegisterDTO}"
                                  enctype="multipart/form-data">
                                <div class="row">
                                    <div class="col-md-12">
                                        <div class="form-group">
                                            <label for="name">Name</label>
                                            <input type="text" th:field="*{name}" id="name"
                                                   required class="form-control">
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-4 pr-1">
                                        <div class="form-group" style="width: 80%">
                                            <label for="tinh">Province</label>
                                            <select th:field="*{province}"  class="css_select" id="tinh" name="tinh" title="Chọn Tỉnh Thành" required step="0.01" min="0.01" max="9999.99" placeholder="Tỉnh/Thành phố ">
                                                <option value="0">Tỉnh Thành</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="col-md-4 px-1">
                                        <div class="form-group" style="width: 80%">
                                            <label for="quan">District</label>
                                            <select th:field="*{district}" class="css_select" id="quan" name="quan" title="Chọn Quận Huyện">
                                                <option value="0">Quận Huyện</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="col-md-4 pl-1">
                                        <div class="form-group" style="width: 80%">
                                            <label for="area">Ward</label>
                                            <select th:field="*{ward}" class="css_select" id="phuong" name="phuong" title="Chọn Phường Xã">
                                                <option value="0">Phường Xã</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-12">
                                        <div class="form-group">
                                            <label for="location">Location</label>
                                            <input type="text" th:field="*{location}" id="location"
                                                   required class="form-control">
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-3 pr-1">
                                        <div class="form-group">
                                            <label for="land_space">Land space</label>
                                            <input type="number" th:field="*{land_space}" id="land_space" class="form-control"
                                                   required placeholder="#.##">
                                        </div>
                                    </div>
                                    <div class="col-md-3 px-1">
                                        <div class="form-group">
                                            <label for="living_space">Living space</label>
                                            <input type="number" th:field="*{living_space}" id="living_space" class="form-control"
                                                   required  placeholder="#.##">
                                        </div>
                                    </div>
                                    <div class="col-md-3 pl-1">
                                        <div class="form-group">
                                            <label for="area">Number of bed room</label>
                                            <input type="number" th:field="*{number_bed_room}" id="area" class="form-control"
                                                   required  placeholder="#.####">
                                        </div>
                                    </div>
                                    <div class="col-md-3 pr-1">
                                        <div class="form-group">
                                            <label for="number_bath">Number of Bath</label>
                                            <input type="number" th:field="*{number_bath}" id="number_bath" class="form-control"
                                                   required step="0.01" placeholder="#.##">
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-12">
                                        <div class="form-group">
                                            <label for="description">Description</label>
                                            <textarea th:field="*{description}" id="description"
                                                      class="form-control"></textarea>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-12">
                                        <div class="form-group">
                                            <label for="coordinatesOnMap">Coordinates on map</label>
                                            <input type="text" th:field="*{coordinates_on_map}"
                                                   id="coordinatesOnMap"
                                                   class="form-control">
                                        </div>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-md-3">
                                        <h3>Choose fire equipment</h3>
                                        <div th:each="equipment : ${fireEquipments}">
                                            <input type="checkbox" name="fireEquipments" th:id="'equipment-' + ${equipment.id}"
                                                   th:value="${equipment.id}" class="form-control" />
                                            <label th:for="'equipment-' + ${equipment.id}" th:text="${equipment.name}" ></label>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-3">
                                        <h3>Choose amenities</h3>
                                        <div th:each="amenity : ${listAmenities}">
                                            <input type="checkbox" name="amenities" th:id="'amenity-' + ${amenity.id}"
                                                   th:value="${amenity.id}" class="form-control" />
                                            <label th:for="'amenity-' + ${amenity.id}" th:text="${amenity.name}"></label>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-6">
                                        <div>
                                            <label for="images">Choose images</label>
                                            <input  type="file" name="images" id="images" class="form-control" multiple
                                                    required>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-6">
                                        <div>
                                            <label for="documents">Choose rule document</label>
                                            <input type="file"  name="documents" id="documents" class="form-control"
                                                   multiple
                                                   required>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-4 pr-1">
                                        <div class="form-group">
                                            <label for="house_owner_name">House Owner Name</label>
                                            <input type="text" th:field="*{houseOwnerEmail}" id="house_owner_name" class="form-control"
                                                   required step="0.01"  placeholder="#.##">
                                        </div>
                                    </div>
<!--                                    <div class="col-md-4 px-1">-->
<!--                                        <div class="form-group">-->
<!--                                            <label for="house_owner_address">House Owner Address</label>-->
<!--                                            <input type="text" th:field="*{houseOwnerAddress}" id="house_owner_address" class="form-control"-->
<!--                                                   required step="0.01" min="0.01" max="9999.99" placeholder="#.##">-->
<!--                                        </div>-->
<!--                                    </div>-->
<!--                                    <div class="col-md-4 pl-1">-->
<!--                                        <div class="form-group">-->
<!--                                            <label for="house_Owner_Phone">House Owner Phone</label>-->
<!--                                            <input type="text" th:field="*{houseOwnerPhone}" id="house_Owner_Phone" class="form-control"-->
<!--                                                   required step="0.0001" min="0.0001" max="99999999.9999" placeholder="#.####">-->
<!--                                        </div>-->
<!--                                    </div>-->
                                </div>
                                <div class="row">
                                    <div class="col-md-6 pr-1">
                                        <div class="form-group">
                                            <label for="price">Price</label>
                                            <input type="number" th:field="*{price}" id="price" class="form-control"
                                                   required step="0.01"  placeholder="#.##">
                                        </div>
                                    </div>
                                    <div class="col-md-6 px-1">
                                        <div class="form-group">
                                            <label for="lease_duration_day">Lease Duration Day</label>
                                            <input type="number" th:field="*{lease_duration_day}" id="lease_duration_day" class="form-control"
                                                   required step="0.01"  placeholder="#.##">
                                        </div>
                                    </div>
                                </div>
                                <div class="row form-group" style="display: flex; flex-direction: column; margin-top: 10px;">
                                    <p class="ml-auto mr-auto row" th:if="${param.message}" th:text="${param.message}"></p>
                                    <div class="update ml-auto mr-auto row">
                                        <button type="submit" class="btn btn-primary btn-round">Save</button>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Het phan noi dung cua trang -->
    </div>
</div>

<!---------------------------------------KHONG DUOC SUA------------------------------------------------------>
<!--   Core JS Files   -->
<script th:src="@{/dashboardStatic/js/core/popper.min.js}"></script>
<script th:src="@{/dashboardStatic/js/core/bootstrap.min.js}"></script>
<script th:src="@{/dashboardStatic/js/plugins/perfect-scrollbar.jquery.min.js}"></script>
<!-- Chart JS -->
<script th:src="@{/dashboardStatic/js/plugins/chartjs.min.js}"></script>
<!--  Notifications Plugin    -->
<script th:src="@{/dashboardStatic/js/plugins/bootstrap-notify.js}"></script>
<!-- Control Center for Now Ui Dashboard: parallax effects, scripts for the example pages etc -->
<script th:src="@{/dashboardStatic/js/paper-dashboard.min.js?v=2.0.1}" type="text/javascript"></script>
<!-- Paper Dashboard DEMO methods, don't include it in your project! -->
<script th:src="@{/dashboardStatic/demo/demo.js}"></script>
<!--Dùng cho summernote-->
<script>
    $(document).ready(function () {
        <!-- script cho richtext-->
        $('#description').summernote({
            height: 300, // Chiều cao của editor
            tabsize: 2,
            placeholder: 'Enter content here...',
            toolbar: [
                ['style', ['style']],
                ['font', ['bold', 'italic', 'underline', 'clear']],
                ['fontname', ['fontname']],
                ['fontsize', ['fontsize']],
                ['color', ['color']],
                ['para', ['ul', 'ol', 'paragraph']],
                ['height', ['height']],
                ['table', ['table']],
                ['insert', ['link', 'picture', 'video']],
                ['view', ['fullscreen', 'codeview', 'help']]
            ]
        });
    });
</script>
<!--Kiểm tra tỷ lệ khung ảnh-->
<script>
    document.getElementById('images').addEventListener('change', function(event) {
        const files = event.target.files; // Lấy danh sách các tệp được chọn
        for (let i = 0; i < files.length; i++) {
            const file = files[i];
            if (file) {
                const img = new Image();
                const reader = new FileReader();
                reader.onload = function(e) {
                    img.src = e.target.result;
                    img.onload = function() {
                        const width = img.width;
                        const height = img.height;
                        // Kiểm tra xem ảnh có chiều rộng lớn hơn chiều cao không
                        if (width < height) {
                            alert(`Image ${file.name} is incorrect. Please use a rectangular image (width must be equal to or greater than height).`);
                            // Reset input nếu có ảnh không hợp lệ
                            event.target.value = '';
                            return; // Ngừng kiểm tra ảnh còn lại
                        }
                    };
                };
                reader.readAsDataURL(file);
            }
        }
    });
    $(document).ready(function() {
        // Lấy tỉnh/thành
        $.getJSON('https://esgoo.net/api-tinhthanh/1/0.htm', function(data_tinh) {
            if (data_tinh.error == 0) {
                $.each(data_tinh.data, function(key_tinh, val_tinh) {
                    // Lưu full_name trong value và id trong data-id
                    $("#tinh").append('<option value="' + val_tinh.full_name + '" data-id="' + val_tinh.id + '">' + val_tinh.full_name + '</option>');
                });

                // Khi chọn tỉnh/thành
                $("#tinh").change(function() {
                    var tinhName = $(this).val(); // Lấy tên tỉnh/thành đã chọn
                    var idtinh = $("#tinh option:selected").data('id'); // Lấy ID từ thuộc tính data-id
                    console.log("ID Tỉnh/Thành phố:", idtinh);
                    console.log("Tên Tỉnh/Thành phố:", tinhName);

                    // Lấy quận/huyện
                    $.getJSON('https://esgoo.net/api-tinhthanh/2/' + idtinh + '.htm', function(data_quan) {
                        if (data_quan.error == 0) {
                            $("#quan").html('<option value="0">Quận Huyện</option>');
                            $("#phuong").html('<option value="0">Phường Xã</option>');
                            $.each(data_quan.data, function(key_quan, val_quan) {
                                // Tương tự như tỉnh, lưu full_name trong value và id trong data-id
                                $("#quan").append('<option value="' + val_quan.full_name + '" data-id="' + val_quan.id + '">' + val_quan.full_name + '</option>');
                            });

                            // Khi chọn quận/huyện
                            $("#quan").change(function() {
                                var quanName = $(this).val(); // Lấy tên quận/huyện đã chọn
                                var idquan = $("#quan option:selected").data('id'); // Lấy ID từ thuộc tính data-id
                                console.log("ID Quận/Huyện:", idquan);
                                console.log("Tên Quận/Huyện:", quanName);

                                // Lấy phường/xã
                                $.getJSON('https://esgoo.net/api-tinhthanh/3/' + idquan + '.htm', function(data_phuong) {
                                    if (data_phuong.error == 0) {
                                        $("#phuong").html('<option value="0">Phường Xã</option>');
                                        $.each(data_phuong.data, function(key_phuong, val_phuong) {
                                            // Lưu tên trong value và id trong data-id
                                            $("#phuong").append('<option value="' + val_phuong.full_name + '" data-id="' + val_phuong.id + '">' + val_phuong.full_name + '</option>');
                                        });

                                        // Khi chọn phường/xã
                                        $("#phuong").change(function() {
                                            var phuongName = $(this).val(); // Lấy tên phường/xã đã chọn
                                            var idphuong = $("#phuong option:selected").data('id'); // Lấy ID từ data-id nếu cần
                                            console.log("ID Phường/Xã:", idphuong);
                                            console.log("Tên Phường/Xã:", phuongName);
                                        });
                                    }
                                });
                            });
                        }
                    });
                });
            }
        });
    });
</script>
<script src="/https://esgoo.net/scripts/jquery.js"></script>
    <style type="text/css">
        .css_select_div { text-align: center; }
        .css_select { display: inline-table; width: 25%; padding: 5px; margin: 5px 2%; border: solid 1px #686868; border-radius: 5px; }
        .result { margin-top: 10px; font-weight: bold; }
    </style>
</body>
</html>